app.post('/webhook', upload.none(), (req, res) => {
  const data = req.body;

  const q1 = data["Q1. ì˜¤ëŠ˜ì€ ë–¨ë¦¬ëŠ” ì†Œê°œíŒ…!"];
  const q2 = data["Q2. ì¡°ì‹ì—ì„œ ê¼­ ë¨¹ëŠ” ë©”ë‰´ëŠ”?"];
  const q3 = data["Q3. ë…¸ë˜ë°© ì„ ê³¡ ìŠ¤íƒ€ì¼ì€?"];
  const q4 = data["Q4. ê°€ì¥ ëŒë¦¬ëŠ” ìš´ë™ì€?"];
  const q5 = data["Q5. ì¹œêµ¬ë“¤ê³¼ ëª¨ì„í•  ë•Œ ë‚˜ëŠ”?"];
  const q6 = data["Q6. ì—¬í–‰ê°€ì„œ ì‹ë‹¹ ê³ ë¥¼ ë•Œ ë‚˜ëŠ”?"];
  const q7 = data["Q7. ì—¬ìš´ì´ ë‚¨ëŠ” ì˜í™”ëŠ”?"];
  const q8 = data["Q8. ë§ˆë¬´ë¦¬í•  ë•Œ ë“£ëŠ” ìŒì•… ìŠ¤íƒ€ì¼ì€?"];

  const drinks = {
    "ë‘ê³¡": 0,
    "ëŒ€ê³¡ì£¼": 0,
    "ëª…ëƒ¥": 0,
    "êµ­êµ1573": 0,
    "ë‹ˆí•˜ì˜¤": 0,
    "ì¥í–¥í˜•": 0,
    "ì²­í–¥í˜•": 0,
  };

  // Q1
  if (q1 === "ì›ƒëŠ” ëª¨ìŠµì´ ê·€ì—½ê³  ìŠ¤ìœ—í•œ ìŠ¤íƒ€ì¼ ğŸ­") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
  } else if (q1 === "ë§ìˆ˜ê°€ ì ì§€ë§Œ ê¹Šì´ ìˆëŠ” ë¶„ìœ„ê¸° ğŸ“š") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q1 === "ê¹”ë”í•˜ê³  ë‹¨ì •í•œ ë„ì‹œ ìŠ¤íƒ€ì¼ ğŸ™ï¸") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q2
  if (q2 === "ê°“ êµ¬ìš´ ë‹¬ì½¤í•œ ì™€í”Œ ğŸ§‡") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
  } else if (q2 === "ì˜¤ë˜ ë“ì¸ ê¹Šì€ ë§›ì˜ ë¯¸ì†Œëœì¥êµ­ ğŸ²") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q2 === "ì‹œì›í•˜ê³  ê°œìš´í•œ ê³¼ì¼ ìƒëŸ¬ë“œ ğŸ‰") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q3
  if (q3 === "ì”ì”í•˜ê³  ê°ì„±ì ì¸ ë°œë¼ë“œ ğŸ¤") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
    drinks["ë‹ˆí•˜ì˜¤"] += 1;
  } else if (q3 === "íŒŒì›Œí’€í•œ ì‹ ë‚˜ëŠ” ì•„ì´ëŒ K-POP ğŸ¸") {
    drinks["ë‘ê³¡"] += 1;
    drinks["êµ­êµ1573"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q4
  if (q4 === "ìš”ê°€ì²˜ëŸ¼ ë¶€ë“œëŸ½ê³  í¸ì•ˆí•œ ìš´ë™ ğŸ§˜â€â™€ï¸") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
    drinks["ë‹ˆí•˜ì˜¤"] += 1;
  } else if (q4 === "ê·¼ìœ¡ì„ í‚¤ìš°ëŠ” ê°•ë„ ë†’ì€ í—¬ìŠ¤ ğŸ‹ï¸â€â™‚ï¸") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q4 === "ê°€ë²¼ìš´ ë™ë„¤ ì‚°ì±… ğŸš¶â€â™‚ï¸") {
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q5
  if (q5 === "ìºì£¼ì–¼í•œ íì—ì„œ ê°€ë³ê²Œ ìˆ˜ë‹¤ ğŸŸ") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
    drinks["ë‹ˆí•˜ì˜¤"] += 1;
  } else if (q5 === "ê³ ê¸‰ ë‹¤ì´ë‹ì—ì„œ ì¢‹ì€ ë¶„ìœ„ê¸° ì¦ê¸°ê¸° ğŸ·") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
    drinks["ë‹ˆí•˜ì˜¤"] += 1;
  }

  // Q6
  if (q6 === "ë¦¬ë·°ê°€ ë§ì€ í˜„ì§€ ë§›ì§‘ ğŸŒ®") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q6 === "í¸í•˜ê²Œ ì¦ê¸°ëŠ” ë™ë„¤ ì‹ë‹¹ ğŸ") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
    drinks["ë‹ˆí•˜ì˜¤"] += 1;
  } else if (q6 === "ê¸¸ ê°€ë‹¤ê°€ ëŒë¦¬ëŠ” ê³³ìœ¼ë¡œ ë„ì „ ğŸ’¥") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q7
  if (q7 === "ë”°ëœ»í•˜ê³  ê¸°ë¶„ ì¢‹ì€ í•´í”¼ì—”ë”© ğŸˆ") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
  } else if (q7 === "ë¬µì§í•œ ê°ë™ì˜ ì§„í•œ ë“œë¼ë§ˆ ğŸ¬") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q7 === "ìƒì¾Œí•˜ê³  ê¹”ë”í•œ ê²°ë§ì˜ ì˜í™” ğŸƒ") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q8
  if (q8 === "ê¸°ë¶„ì´ ê°€ë²¼ì›Œì§€ëŠ” ì–´ì¿ ìŠ¤í‹± ğŸ§") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
  } else if (q8 === "ê¹Šì´ ìˆëŠ” í´ë˜ì‹ì´ë‚˜ ì¬ì¦ˆ ğŸ·") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q8 === "ë§ˆìŒì´ í¸ì•ˆí•´ì§€ëŠ” í”¼ì•„ë…¸ ì—°ì£¼ ğŸ¹") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  const recommendation = Object.entries(drinks).sort((a, b) => b[1] - a[1])[0][0];
  const score = drinks[recommendation];
  const message = `ë‹¹ì‹ ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ì „í†µì£¼ëŠ” "${recommendation}" ì…ë‹ˆë‹¤!`;

  res.redirect(`/result.html?message=${encodeURIComponent(message)}`);
});
