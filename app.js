app.post('/webhook', upload.none(), (req, res) => {
  const data = req.body;

  const q1 = data["Q1. ì˜¤ëŠ˜ì€ ë–¨ë¦¬ëŠ” ì†Œê°œíŒ…!"];
  const q2 = data["Q2. ì¡°ì‹ì—ì„œ ê¼­ ë¨¹ëŠ” ë©”ë‰´ëŠ”?"];

  const drinks = {
    "ë‘ê³¡": 0,
    "ëŒ€ê³¡ì£¼": 0,
    "ëª…ëƒ¥": 0,
    "êµ­êµ1573": 0,
    "ë‹ˆí•˜ì˜¤": 0,
    "ì¥í–¥í˜•": 0,
    "ì²­í–¥í˜•": 0,
  };

  // Q1
  if (q1 === "ì›ƒëŠ” ëª¨ìŠµì´ ê·€ì—½ê³  ìŠ¤ìœ—í•œ ìŠ¤íƒ€ì¼ ğŸ­") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
  } else if (q1 === "ë§ìˆ˜ê°€ ì ì§€ë§Œ ê¹Šì´ ìˆëŠ” ë¶„ìœ„ê¸° ğŸ“š") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q1 === "ê¹”ë”í•˜ê³  ë‹¨ì •í•œ ë„ì‹œ ìŠ¤íƒ€ì¼ ğŸ™ï¸") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  // Q2
  if (q2 === "ê°“ êµ¬ìš´ ë‹¬ì½¤í•œ ì™€í”Œ ğŸ§‡") {
    drinks["ë‘ê³¡"] += 1;
    drinks["ì¥í–¥í˜•"] += 1;
  } else if (q2 === "ì˜¤ë˜ ë“ì¸ ê¹Šì€ ë§›ì˜ ë¯¸ì†Œëœì¥êµ­ ğŸ²") {
    drinks["ëŒ€ê³¡ì£¼"] += 1;
    drinks["ëª…ëƒ¥"] += 1;
    drinks["êµ­êµ1573"] += 1;
  } else if (q2 === "ì‹œì›í•˜ê³  ê°œìš´í•œ ê³¼ì¼ ìƒëŸ¬ë“œ ğŸ‰") {
    drinks["ëª…ëƒ¥"] += 1;
    drinks["ì²­í–¥í˜•"] += 1;
  }

  const recommendation = Object.entries(drinks).sort((a, b) => b[1] - a[1])[0][0];
  const message = `ë‹¹ì‹ ì—ê²Œ ì–´ìš¸ë¦¬ëŠ” ì „í†µì£¼ëŠ” "${recommendation}" ì…ë‹ˆë‹¤!`;

  res.redirect(`/result.html?message=${encodeURIComponent(message)}`);
});
